# Locanara GraphQL API operations (common)

# Device and capability queries
extend type Query {
  """
  Get current device capabilities for AI features
  """
  getDeviceCapability: DeviceCapability!

  """
  Check if a specific feature is available
  """
  isFeatureAvailable(feature: FeatureType!): Boolean!

  """
  Get current execution context
  """
  getContext(contextId: ID!): ExecutionContext

  """
  Get execution result by ID
  """
  getExecutionResult(executionId: ID!): ExecutionResult

  """
  Get all execution results for a context
  """
  getExecutionHistory(contextId: ID!, limit: Int): [ExecutionResult!]!
}

# AI feature execution
extend type Mutation {
  """
  Initialize the Locanara SDK
  """
  initializeSDK(platform: Platform!): VoidResult!

  """
  Create a new execution context
  """
  createContext(preferences: ContextPreferencesInput): ExecutionContext!

  """
  Update an existing context
  """
  updateContext(input: UpdateContextInput!): ExecutionContext!

  """
  Execute an AI feature
  """
  executeFeature(input: ExecuteFeatureInput!): ExecutionResult!

  """
  Cancel an ongoing execution
  """
  cancelExecution(executionId: ID!): VoidResult!

  """
  Clear execution history for a context
  """
  clearHistory(contextId: ID!): VoidResult!

  """
  Delete a context
  """
  deleteContext(contextId: ID!): VoidResult!

  """
  Preload models for better performance
  """
  preloadModels(features: [FeatureType!]!): VoidResult!

  """
  Unload models to free memory
  """
  unloadModels(features: [FeatureType!]!): VoidResult!
}

# Real-time event subscriptions
extend type Subscription {
  """
  Subscribe to execution state changes
  """
  onExecutionStateChanged(executionId: ID!): ExecutionResult!

  """
  Subscribe to device capability changes
  """
  onCapabilityChanged: DeviceCapability!

  """
  Subscribe to all Locanara events
  """
  onEvent: LocanaraEventPayload!
}

type LocanaraEventPayload {
  """
  Event type
  """
  event: LocanaraEvent!
  """
  Event timestamp
  """
  timestamp: Float!
  """
  Event data (event-specific)
  """
  data: String
}

